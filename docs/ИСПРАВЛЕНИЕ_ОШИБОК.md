# üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–æ–∫ RAG-—Å–∏—Å—Ç–µ–º—ã

## ‚ùå –û–±–Ω–∞—Ä—É–∂–µ–Ω–Ω—ã–µ –æ—à–∏–±–∫–∏

### 1. –û—à–∏–±–∫–∞: `'VectorStoreRetriever' object has no attribute 'get_relevant_documents'`

**–ü—Ä–∏—á–∏–Ω–∞:** –ú–µ—Ç–æ–¥ `get_relevant_documents()` —É—Å—Ç–∞—Ä–µ–ª –≤ –Ω–æ–≤—ã—Ö –≤–µ—Ä—Å–∏—è—Ö LangChain

**–†–µ—à–µ–Ω–∏–µ:** ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û - –∑–∞–º–µ–Ω–µ–Ω–æ –Ω–∞ `invoke()`

### 2. –û—à–∏–±–∫–∞: `Error code: 403 - unsupported_country_region_territory`

**–ü—Ä–∏—á–∏–Ω–∞:** OpenAI API –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –≤–∞—à —Ä–µ–≥–∏–æ–Ω (–†–æ—Å—Å–∏—è)

**–†–µ—à–µ–Ω–∏—è:**

#### –í–∞—Ä–∏–∞–Ω—Ç A: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å VPN (–±—ã—Å—Ç—Ä–æ–µ —Ä–µ—à–µ–Ω–∏–µ)
1. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ VPN (–°–®–ê, –ï–≤—Ä–æ–ø–∞)
2. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–æ–≥—Ä–∞–º–º—É

#### –í–∞—Ä–∏–∞–Ω—Ç B: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ª–æ–∫–∞–ª—å–Ω—É—é –º–æ–¥–µ–ª—å (–±–µ–∑ OpenAI)
```powershell
python rag_system_local.py
```

–≠—Ç–∞ –≤–µ—Ä—Å–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é –ª–æ–∫–∞–ª—å–Ω–æ —Å –º–æ–¥–µ–ª—å—é Llama 3.

#### –í–∞—Ä–∏–∞–Ω—Ç C: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥—Ä—É–≥–æ–π API –∫–ª—é—á
–ü–æ–ª—É—á–∏—Ç–µ API –∫–ª—é—á –æ—Ç –∞–∫–∫–∞—É–Ω—Ç–∞, –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –≤ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º–æ–º —Ä–µ–≥–∏–æ–Ω–µ.

## ‚úÖ –ß—Ç–æ –±—ã–ª–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ

### –§–∞–π–ª: `rag_system.py`

1. **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω –º–µ—Ç–æ–¥ retriever:**
```python
# –ë—ã–ª–æ:
context_docs = self.retriever.get_relevant_documents(question)

# –°—Ç–∞–ª–æ:
context_docs = self.retriever.invoke(question)
```

2. **–î–æ–±–∞–≤–ª–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–∫–∏ 403:**
```python
if "403" in error_msg and "unsupported_country_region_territory" in error_msg:
    return "‚ö† –û—à–∏–±–∫–∞ OpenAI API: –í–∞—à —Ä–µ–≥–∏–æ–Ω –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è..."
```

3. **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω –∏–º–ø–æ—Ä—Ç HuggingFaceEmbeddings:**
```python
try:
    from langchain_huggingface import HuggingFaceEmbeddings
except ImportError:
    from langchain_community.embeddings import HuggingFaceEmbeddings
```

## üöÄ –ö–∞–∫ –∑–∞–ø—É—Å—Ç–∏—Ç—å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—É—é –≤–µ—Ä—Å–∏—é

### –° OpenAI API (—Ç—Ä–µ–±—É–µ—Ç—Å—è VPN):

```powershell
# 1. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ VPN
# 2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∏—Å—Ç–µ–º—É
python rag_system.py
```

### –ë–µ–∑ OpenAI API (–ª–æ–∫–∞–ª—å–Ω–∞—è –º–æ–¥–µ–ª—å):

```powershell
# –ó–∞–ø—É—Å–∫ —Å –ª–æ–∫–∞–ª—å–Ω–æ–π –º–æ–¥–µ–ª—å—é Llama
python rag_system_local.py
```

**‚ö† –í–Ω–∏–º–∞–Ω–∏–µ:** –ü–µ—Ä–≤—ã–π –∑–∞–ø—É—Å–∫ –ª–æ–∫–∞–ª—å–Ω–æ–π –≤–µ—Ä—Å–∏–∏ –∑–∞–π–º–µ—Ç 5-10 –º–∏–Ω—É—Ç (–∑–∞–≥—Ä—É–∑–∫–∞ –º–æ–¥–µ–ª–∏ ~4GB)

## üìä –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –≤–µ—Ä—Å–∏–π

| –ü–∞—Ä–∞–º–µ—Ç—Ä | rag_system.py | rag_system_local.py |
|----------|---------------|---------------------|
| API –∫–ª—é—á | OpenAI (–Ω—É–∂–µ–Ω) | –ù–µ –Ω—É–∂–µ–Ω |
| –ò–Ω—Ç–µ—Ä–Ω–µ—Ç | –¢—Ä–µ–±—É–µ—Ç—Å—è | –¢–æ–ª—å–∫–æ –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –º–æ–¥–µ–ª–∏ |
| VPN | –¢—Ä–µ–±—É–µ—Ç—Å—è | –ù–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è |
| –°–∫–æ—Ä–æ—Å—Ç—å | –ë—ã—Å—Ç—Ä–æ | –ú–µ–¥–ª–µ–Ω–Ω–µ–µ |
| –ö–∞—á–µ—Å—Ç–≤–æ | –û—Ç–ª–∏—á–Ω–æ–µ | –•–æ—Ä–æ—à–µ–µ |
| –†–∞–∑–º–µ—Ä –º–æ–¥–µ–ª–∏ | - | ~4GB |

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π –∑–∞–ø—É—Å—Ç–∏—Ç–µ:

```powershell
python rag_system.py
```

–î–æ–ª–∂–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å –±–µ–∑ –æ—à–∏–±–æ–∫ (–ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ VPN) –∏–ª–∏ –ø–æ–∫–∞–∑–∞—Ç—å –ø–æ–Ω—è—Ç–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ —Ä–µ–≥–∏–æ–Ω–∞.

## üí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

1. **–î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏:** –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `rag_system_local.py` (–Ω–µ –Ω—É–∂–µ–Ω VPN)
2. **–î–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞:** –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `rag_system.py` —Å VPN –∏–ª–∏ –ø—Ä–æ–∫—Å–∏
3. **–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞:** –†–∞—Å—Å–º–æ—Ç—Ä–∏—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –¥—Ä—É–≥–∏—Ö API:
   - Anthropic Claude (—á–µ—Ä–µ–∑ VPN)
   - YandexGPT (—Ä–∞–±–æ—Ç–∞–µ—Ç –≤ –†–æ—Å—Å–∏–∏)
   - GigaChat –æ—Ç –°–±–µ—Ä–∞ (—Ä–∞–±–æ—Ç–∞–µ—Ç –≤ –†–æ—Å—Å–∏–∏)

## üìù –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ YandexGPT –≤–º–µ—Å—Ç–æ OpenAI:

–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `rag_system.py`:

```python
# –ó–∞–º–µ–Ω–∏—Ç–µ:
from langchain_openai import ChatOpenAI
self.llm = ChatOpenAI(model_name="gpt-4o-mini", temperature=0.5)

# –ù–∞:
from langchain_community.llms import YandexGPT
self.llm = YandexGPT(api_key="–≤–∞—à-–∫–ª—é—á", model_uri="gpt://...")
```

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ GigaChat:

```python
from langchain_community.chat_models import GigaChat
self.llm = GigaChat(credentials="–≤–∞—à-–∫–ª—é—á", verify_ssl_certs=False)
```

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–æ—á–Ω—ã–π —Å–ø–∏—Å–æ–∫

- [x] –ò—Å–ø—Ä–∞–≤–ª–µ–Ω –º–µ—Ç–æ–¥ `get_relevant_documents` ‚Üí `invoke`
- [x] –î–æ–±–∞–≤–ª–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–∫–∏ 403
- [x] –ò—Å–ø—Ä–∞–≤–ª–µ–Ω –∏–º–ø–æ—Ä—Ç HuggingFaceEmbeddings
- [x] –°–æ–∑–¥–∞–Ω–∞ –ª–æ–∫–∞–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è –±–µ–∑ OpenAI
- [x] –î–æ–±–∞–≤–ª–µ–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

## üÜò –ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã –æ—Å—Ç–∞–ª–∏—Å—å

1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ VPN –ø–æ–¥–∫–ª—é—á–µ–Ω (–¥–ª—è OpenAI –≤–µ—Ä—Å–∏–∏)
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ API –∫–ª—é—á OpenAI
3. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ª–æ–∫–∞–ª—å–Ω—É—é –≤–µ—Ä—Å–∏—é: `python rag_system_local.py`
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –æ—à–∏–±–æ–∫ –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ

---

**–í—Å–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–∏–º–µ–Ω–µ–Ω—ã!** –°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –∫ —Ä–∞–±–æ—Ç–µ. üéâ

